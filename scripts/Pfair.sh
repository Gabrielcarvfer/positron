
./waf --run "main --balanced=true --seed=$1" 2> /dev/null | awk 'function ceil(x, y){y=int(x); return(x>y?y+1:y)} function app(x){return (x <= 3 ? x : app(x - 3))} BEGIN{ count=0 }{ if ($4 == "allocate_worker_application") {apptype=app($11); nodegroup=ceil(($8*3)/60); aux=(apptype == nodegroup ? 1 : 0); count+=aux; print $10, $11, "type", apptype, $7, $8, "group", nodegroup, "fair", aux, "count", count} }END{print "total percentage of fair allocation", (count/180)*100 "%"}'